{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\idanb\\\\Desktop\\\\IDC\\\\semester b\\\\app development\\\\ex\\\\ex3\\\\mikasa-store-app\\\\idans-app\\\\src\\\\SignIn.js\";\nimport React from 'react';\n\nclass Signin extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onEmailChange = event => {\n      this.setState({\n        signInEmail: event.target.value\n      });\n    };\n\n    this.onPasswordChange = event => {\n      this.setState({\n        signInPassword: event.target.value\n      });\n    };\n\n    this.onChangeCheckbox = event => {\n      this.setState({\n        signInRemember: event.target.checked\n      });\n    };\n\n    this.saveAuthTokenInSessions = token => {\n      window.localStorage.setItem('token', token);\n    };\n\n    this.saveUserTokenInSessions = (email, password) => {\n      window.localStorage.setItem('email', email);\n      window.localStorage.setItem('password', password);\n    };\n\n    this.deleteUserTokenInSessions = () => {\n      window.localStorage.removeItem('email');\n      window.localStorage.removeItem('password');\n    };\n\n    this.onSubmitSignIn = () => {\n      if (this.state.signInRemember) {\n        this.saveUserTokenInSessions(this.state.signInEmail, this.state.signInPassword);\n      }\n\n      if (this.state.signInRemember === false) {\n        this.deleteUserTokenInSessions();\n      }\n\n      fetch('http://localhost:3000/signin', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.state.signInEmail,\n          password: this.state.signInPassword\n        })\n      }).then(response => response.json()).then(data => {\n        console.log(data);\n\n        if (data && data.success === \"true\") {\n          this.saveAuthTokenInSessions(data.token);\n          this.props.loadUser(data.user);\n          this.props.loggingIn(data.userId);\n          this.props.onRouteChange('home');\n        }\n      }).catch(err => console.log(\"hi\"));\n    };\n\n    if (props.email !== '') {\n      this.state = {\n        signInEmail: props.email,\n        signInPassword: window.localStorage.getItem('password'),\n        signInRemember: false\n      };\n    } else {\n      this.state = {\n        signInEmail: '',\n        signInPassword: '',\n        signInRemember: false\n      };\n    }\n  }\n\n  render() {\n    const {\n      onRouteChange\n    } = this.props.onRouteChange;\n    return /*#__PURE__*/React.createElement(\"article\", {\n      className: \"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"pa4 black-80\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"measure\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      id: \"sign_up\",\n      className: \"ba b--transparent ph0 mh0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"legend\", {\n      className: \"f1 fw6 ph0 mh0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 29\n      }\n    }, \"Sign In\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"db fw6 lh-copy f6\",\n      htmlFor: \"email-address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 33\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\",\n      type: \"email\",\n      name: \"email-address\",\n      id: \"email-address\",\n      value: this.state.signInEmail,\n      onChange: this.onEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mv3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"db fw6 lh-copy f6\",\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 33\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\",\n      type: \"password\",\n      name: \"password\",\n      id: \"password\",\n      value: this.state.signInPassword,\n      onChange: this.onPasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mv3 flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      checked: this.state.signInRemember,\n      onChange: this.onChangeCheckbox,\n      className: \"b\",\n      name: \"rememberMe\",\n      id: \"rememberMe\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 37\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 33\n      }\n    }, \"Remember me\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onClick: this.onSubmitSignIn,\n      className: \"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib\",\n      type: \"submit\",\n      value: \"Sign in\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"lh-copy mt3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      onClick: () => onRouteChange('register'),\n      className: \"f6 link dim black db pointer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 29\n      }\n    }, \"Register\")))));\n  }\n\n}\n\nexport default Signin;","map":{"version":3,"sources":["C:/Users/idanb/Desktop/IDC/semester b/app development/ex/ex3/mikasa-store-app/idans-app/src/SignIn.js"],"names":["React","Signin","Component","constructor","props","onEmailChange","event","setState","signInEmail","target","value","onPasswordChange","signInPassword","onChangeCheckbox","signInRemember","checked","saveAuthTokenInSessions","token","window","localStorage","setItem","saveUserTokenInSessions","email","password","deleteUserTokenInSessions","removeItem","onSubmitSignIn","state","fetch","method","headers","body","JSON","stringify","then","response","json","data","console","log","success","loadUser","user","loggingIn","userId","onRouteChange","catch","err","getItem","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nclass Signin extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        if(props.email !== '') {\r\n            this.state = {\r\n                signInEmail: props.email,\r\n                signInPassword: window.localStorage.getItem('password'),\r\n                signInRemember: false\r\n            }\r\n        }\r\n        else{\r\n            this.state = {\r\n                signInEmail: '',\r\n                signInPassword: '',\r\n                signInRemember: false\r\n            }\r\n        }\r\n    }\r\n\r\n    onEmailChange = (event) => {\r\n        this.setState({signInEmail: event.target.value})\r\n    }\r\n\r\n    onPasswordChange = (event) => {\r\n        this.setState({signInPassword: event.target.value})\r\n    }\r\n    onChangeCheckbox = (event) => {\r\n        this.setState({signInRemember: event.target.checked})\r\n    }\r\n    saveAuthTokenInSessions = (token) => {\r\n        window.localStorage.setItem('token', token);\r\n    }\r\n    saveUserTokenInSessions = (email, password) => {\r\n        window.localStorage.setItem('email', email);\r\n        window.localStorage.setItem('password', password);\r\n    }\r\n    deleteUserTokenInSessions = () => {\r\n        window.localStorage.removeItem('email');\r\n        window.localStorage.removeItem('password');\r\n    }\r\n\r\n    onSubmitSignIn = () => {\r\n        if(this.state.signInRemember){\r\n            this.saveUserTokenInSessions(this.state.signInEmail,this.state.signInPassword)\r\n        }\r\n        if(this.state.signInRemember === false){\r\n            this.deleteUserTokenInSessions()\r\n        }\r\n        fetch('http://localhost:3000/signin', {\r\n            method: 'post',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({\r\n                email: this.state.signInEmail,\r\n                password: this.state.signInPassword,\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => { console.log(data)\r\n                if (data && data.success === \"true\") {\r\n                    this.saveAuthTokenInSessions(data.token)\r\n                    this.props.loadUser(data.user)\r\n                    this.props.loggingIn(data.userId);\r\n                    this.props.onRouteChange('home');\r\n                }\r\n            })\r\n            .catch(err=>console.log(\"hi\"))\r\n    }\r\n\r\n    render() {\r\n        const { onRouteChange } = this.props.onRouteChange;\r\n        return (\r\n            <article className=\"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center\">\r\n                <main className=\"pa4 black-80\">\r\n                    <div className=\"measure\">\r\n                        <fieldset id=\"sign_up\" className=\"ba b--transparent ph0 mh0\">\r\n                            <legend className=\"f1 fw6 ph0 mh0\">Sign In</legend>\r\n                            <div className=\"mt3\">\r\n                                <label className=\"db fw6 lh-copy f6\" htmlFor=\"email-address\">Email</label>\r\n                                <input\r\n                                    className=\"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\"\r\n                                    type=\"email\"\r\n                                    name=\"email-address\"\r\n                                    id=\"email-address\"\r\n                                    value={this.state.signInEmail}\r\n                                    onChange={this.onEmailChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"mv3\">\r\n                                <label className=\"db fw6 lh-copy f6\" htmlFor=\"password\">Password</label>\r\n                                <input\r\n                                    className=\"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\"\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    id=\"password\"\r\n                                    value={this.state.signInPassword}\r\n                                    onChange={this.onPasswordChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"mv3 flex\">\r\n                                    <input type=\"checkbox\" checked={this.state.signInRemember}  onChange={this.onChangeCheckbox}\r\n                                    className=\"b\"\r\n                                    name=\"rememberMe\"\r\n                                    id=\"rememberMe\"\r\n                                    />\r\n                                <label>Remember me</label>\r\n                            </div>\r\n                        </fieldset>\r\n                        <div className=\"\">\r\n                            <input\r\n                                onClick={this.onSubmitSignIn}\r\n                                className=\"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib\"\r\n                                type=\"submit\"\r\n                                value=\"Sign in\"\r\n                            />\r\n                        </div>\r\n                        <div className=\"lh-copy mt3\">\r\n                            <p  onClick={() => onRouteChange('register')} className=\"f6 link dim black db pointer\">Register</p>\r\n                        </div>\r\n                    </div>\r\n                </main>\r\n            </article>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Signin;"]},"metadata":{},"sourceType":"module"}