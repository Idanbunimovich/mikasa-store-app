{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\idanb\\\\Desktop\\\\IDC\\\\semester b\\\\app development\\\\ex\\\\ex3\\\\mikasa-store-app\\\\idans-app\\\\src\\\\register.js\";\nimport React from 'react';\n\nclass Register extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onNameChange = event => {\n      this.setState({\n        name: event.target.value\n      });\n    };\n\n    this.onEmailChange = event => {\n      this.setState({\n        email: event.target.value\n      });\n    };\n\n    this.saveAuthTokenInSessions = token => {\n      window.localStorage.setItem('token', token);\n    };\n\n    this.saveUserTokenInSessions = (email, password) => {\n      window.localStorage.setItem('email', email);\n      window.localStorage.setItem('password', password);\n    };\n\n    this.onPasswordChange = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n\n    this.onChangeCheckbox = event => {\n      this.setState({\n        signInRemember: event.target.checked\n      });\n    };\n\n    this.onSubmitSignIn = () => {\n      if (this.state.signInRemember) {\n        this.saveUserTokenInSessions(this.state.email, this.state.password);\n      }\n\n      fetch('http://localhost:3000/register', {\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.state.email,\n          password: this.state.password,\n          name: this.state.name,\n          remember: this.state.remember\n        })\n      }).then(response => response.json()).then(user => {\n        if (user.id) {\n          fetch('http://localhost:3000/signin', {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              email: this.state.email,\n              password: this.state.password,\n              remember: this.state.remember\n            })\n          }).then(response => response.json()).then(data => {\n            if (data && data.success === \"true\") {\n              this.saveAuthTokenInSessions(data.token);\n              this.props.loadUser(data.user);\n              this.props.loggingIn(data.userId);\n              this.props.onRouteChange('home');\n            }\n          }).catch(err => console.log(\"hey\"));\n        }\n      });\n    };\n\n    this.state = {\n      email: '',\n      password: '',\n      name: '',\n      remember: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"article\", {\n      className: \"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"main\", {\n      className: \"pa4 black-80\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"measure\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      id: \"sign_up\",\n      className: \"ba b--transparent ph0 mh0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"legend\", {\n      className: \"f1 fw6 ph0 mh0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    }, \"Register\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"db fw6 lh-copy f6\",\n      htmlFor: \"name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 33\n      }\n    }, \"Name\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\",\n      type: \"text\",\n      name: \"name\",\n      id: \"name\",\n      onChange: this.onNameChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mt3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"db fw6 lh-copy f6\",\n      htmlFor: \"email-address\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 33\n      }\n    }, \"Email\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\",\n      type: \"email\",\n      name: \"email-address\",\n      id: \"email-address\",\n      onChange: this.onEmailChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mv3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"db fw6 lh-copy f6\",\n      htmlFor: \"password\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 33\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\",\n      type: \"password\",\n      name: \"password\",\n      id: \"password\",\n      onChange: this.onPasswordChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 33\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mv3 flex\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"checkbox\",\n      checked: this.state.remember,\n      onChange: this.onChangeCheckbox,\n      className: \"b\",\n      name: \"rememberMe\",\n      id: \"rememberMe\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 33\n      }\n    }, \"Remember me\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      onClick: this.onSubmitSignIn,\n      className: \"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib\",\n      type: \"submit\",\n      value: \"Register\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 29\n      }\n    })))));\n  }\n\n}\n\nexport default Register;","map":{"version":3,"sources":["C:/Users/idanb/Desktop/IDC/semester b/app development/ex/ex3/mikasa-store-app/idans-app/src/register.js"],"names":["React","Register","Component","constructor","props","onNameChange","event","setState","name","target","value","onEmailChange","email","saveAuthTokenInSessions","token","window","localStorage","setItem","saveUserTokenInSessions","password","onPasswordChange","onChangeCheckbox","signInRemember","checked","onSubmitSignIn","state","fetch","method","headers","body","JSON","stringify","remember","then","response","json","user","id","data","success","loadUser","loggingIn","userId","onRouteChange","catch","err","console","log","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nclass Register extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            email: '',\r\n            password: '',\r\n            name: '',\r\n            remember:false\r\n        }\r\n    }\r\n\r\n    onNameChange = (event) => {\r\n        this.setState({name: event.target.value})\r\n    }\r\n\r\n    onEmailChange = (event) => {\r\n        this.setState({email: event.target.value})\r\n    }\r\n    saveAuthTokenInSessions = (token) => {\r\n        window.localStorage.setItem('token', token);\r\n    }\r\n    saveUserTokenInSessions = (email, password) => {\r\n        window.localStorage.setItem('email', email);\r\n        window.localStorage.setItem('password', password);\r\n    }\r\n\r\n    onPasswordChange = (event) => {\r\n        this.setState({password: event.target.value})\r\n    }\r\n    onChangeCheckbox = (event) => {\r\n        this.setState({signInRemember: event.target.checked})\r\n    }\r\n\r\n    onSubmitSignIn = () => {\r\n        if(this.state.signInRemember){\r\n            this.saveUserTokenInSessions(this.state.email,this.state.password)\r\n        }\r\n        fetch('http://localhost:3000/register', {\r\n            method: 'post',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({\r\n                email: this.state.email,\r\n                password: this.state.password,\r\n                name: this.state.name,\r\n                remember : this.state.remember\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(user => {\r\n\r\n                if (user.id) {\r\n                    fetch('http://localhost:3000/signin', {\r\n                        method: 'post',\r\n                        headers: {'Content-Type': 'application/json'},\r\n                        body: JSON.stringify({\r\n                            email: this.state.email,\r\n                            password: this.state.password,\r\n                            remember:this.state.remember\r\n                        })\r\n                    })\r\n                        .then(response => response.json())\r\n                        .then(data => {\r\n                            if (data && data.success === \"true\") {\r\n                                this.saveAuthTokenInSessions(data.token)\r\n                                this.props.loadUser(data.user)\r\n                                this.props.loggingIn(data.userId);\r\n                                this.props.onRouteChange('home');\r\n                            }\r\n                        })\r\n                        .catch(err=>console.log(\"hey\"))\r\n                }\r\n            })\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <article className=\"br3 ba b--black-10 mv4 w-100 w-50-m w-25-l mw6 shadow-5 center\">\r\n                <main className=\"pa4 black-80\">\r\n                    <div className=\"measure\">\r\n                        <fieldset id=\"sign_up\" className=\"ba b--transparent ph0 mh0\">\r\n                            <legend className=\"f1 fw6 ph0 mh0\">Register</legend>\r\n                            <div className=\"mt3\">\r\n                                <label className=\"db fw6 lh-copy f6\" htmlFor=\"name\">Name</label>\r\n                                <input\r\n                                    className=\"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\"\r\n                                    type=\"text\"\r\n                                    name=\"name\"\r\n                                    id=\"name\"\r\n                                    onChange={this.onNameChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"mt3\">\r\n                                <label className=\"db fw6 lh-copy f6\" htmlFor=\"email-address\">Email</label>\r\n                                <input\r\n                                    className=\"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\"\r\n                                    type=\"email\"\r\n                                    name=\"email-address\"\r\n                                    id=\"email-address\"\r\n                                    onChange={this.onEmailChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"mv3\">\r\n                                <label className=\"db fw6 lh-copy f6\" htmlFor=\"password\">Password</label>\r\n                                <input\r\n                                    className=\"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100\"\r\n                                    type=\"password\"\r\n                                    name=\"password\"\r\n                                    id=\"password\"\r\n                                    onChange={this.onPasswordChange}\r\n                                />\r\n                            </div>\r\n                            <div className=\"mv3 flex\">\r\n                                <input type=\"checkbox\" checked={this.state.remember}  onChange={this.onChangeCheckbox}\r\n                                       className=\"b\"\r\n                                       name=\"rememberMe\"\r\n                                       id=\"rememberMe\"\r\n                                />\r\n                                <label>Remember me</label>\r\n                            </div>\r\n                        </fieldset>\r\n                        <div className=\"\">\r\n                            <input\r\n                                onClick={this.onSubmitSignIn}\r\n                                className=\"b ph3 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib\"\r\n                                type=\"submit\"\r\n                                value=\"Register\"\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                </main>\r\n            </article>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Register;"]},"metadata":{},"sourceType":"module"}